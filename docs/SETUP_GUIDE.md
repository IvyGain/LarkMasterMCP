# LarkMasterMCP ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## ğŸ“‹ ç›®æ¬¡
1. [å‰ææ¡ä»¶](#å‰ææ¡ä»¶)
2. [Larkã‚¢ãƒ—ãƒªã®ä½œæˆ](#larkã‚¢ãƒ—ãƒªã®ä½œæˆ)
3. [æ¨©é™ã®è¨­å®š](#æ¨©é™ã®è¨­å®š)
4. [ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
5. [AIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®š](#aiã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®š)
6. [å‹•ä½œç¢ºèª](#å‹•ä½œç¢ºèª)
7. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## å‰ææ¡ä»¶

- Python 3.8ä»¥ä¸Š
- pip (Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼)
- Larkã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆç®¡ç†è€…æ¨©é™æ¨å¥¨ï¼‰

---

## Larkã‚¢ãƒ—ãƒªã®ä½œæˆ

### 1. Lark Open Platformã«ã‚¢ã‚¯ã‚»ã‚¹

**å›½éš›ç‰ˆï¼ˆLarkï¼‰:**
https://open.larksuite.com/app

**ä¸­å›½ç‰ˆï¼ˆé£›æ›¸/Feishuï¼‰:**
https://open.feishu.cn/app

### 2. æ–°è¦ã‚¢ãƒ—ãƒªã‚’ä½œæˆ

1. ã€ŒCreate Appã€ã¾ãŸã¯ã€Œåˆ›å»ºåº”ç”¨ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€ŒCustom Appã€ã‚’é¸æŠ
3. ã‚¢ãƒ—ãƒªåã‚’å…¥åŠ›ï¼ˆä¾‹: "LarkMasterMCP"ï¼‰
4. ã‚¢ãƒ—ãƒªã®èª¬æ˜ã‚’å…¥åŠ›
5. ã€ŒCreateã€ã‚’ã‚¯ãƒªãƒƒã‚¯

### 3. èªè¨¼æƒ…å ±ã‚’å–å¾—

1. ä½œæˆã—ãŸã‚¢ãƒ—ãƒªã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€ŒCredentials & Basic Infoã€ã«ç§»å‹•
3. ä»¥ä¸‹ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä¿å­˜:
   - **App ID**: `cli_xxxxxxxxxx`
   - **App Secret**: `xxxxxxxxxxxxxxxxxx`

---

## æ¨©é™ã®è¨­å®š

### å¿…è¦ãªæ¨©é™ä¸€è¦§

ã‚¢ãƒ—ãƒªã«ä»¥ä¸‹ã®æ¨©é™ã‚’è¿½åŠ ã—ã¦ãã ã•ã„:

#### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°
- `im:message` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€å—ä¿¡
- `im:message:send_as_bot` - Botã¨ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
- `im:chat` - ãƒãƒ£ãƒƒãƒˆæƒ…å ±ã®å–å¾—
- `im:chat:create` - ãƒãƒ£ãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã®ä½œæˆ

#### ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
- `calendar:calendar` - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¢ã‚¯ã‚»ã‚¹
- `calendar:calendar:readonly` - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼èª­ã¿å–ã‚Š

#### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `docs:doc` - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ“ä½œ
- `drive:drive` - ãƒ‰ãƒ©ã‚¤ãƒ–æ“ä½œ

#### Bitable (å¤šæ¬¡å…ƒãƒ†ãƒ¼ãƒ–ãƒ«)
- `bitable:app` - Bitableã‚¢ãƒ—ãƒªæ“ä½œ
- `bitable:table` - ãƒ†ãƒ¼ãƒ–ãƒ«æ“ä½œ

#### Wiki
- `wiki:wiki` - Wikiã‚¹ãƒšãƒ¼ã‚¹æ“ä½œ

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
- `contact:user.base:readonly` - ãƒ¦ãƒ¼ã‚¶ãƒ¼åŸºæœ¬æƒ…å ±èª­ã¿å–ã‚Š
- `contact:department.base:readonly` - éƒ¨é–€æƒ…å ±èª­ã¿å–ã‚Š

### æ¨©é™ã®è¿½åŠ æ–¹æ³•

1. ã‚¢ãƒ—ãƒªè¨­å®š â†’ ã€ŒPermissions & Scopesã€
2. ã€ŒAdd Scopesã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ä¸Šè¨˜ã®æ¨©é™ã‚’æ¤œç´¢ã—ã¦è¿½åŠ 
4. ã€ŒSaveã€ã‚’ã‚¯ãƒªãƒƒã‚¯

### ã‚¢ãƒ—ãƒªã®å…¬é–‹

1. ã€ŒApp Releaseã€ã¾ãŸã¯ã€Œç‰ˆæœ¬ç®¡ç†ä¸å‘å¸ƒã€ã«ç§»å‹•
2. ã€ŒCreate Versionã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã‚’å…¥åŠ›
4. ã€ŒSubmit for Reviewã€ã§å¯©æŸ»ã«æå‡º
5. ï¼ˆå†…éƒ¨ã‚¢ãƒ—ãƒªã®å ´åˆã¯è‡ªå‹•æ‰¿èªã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼‰

---

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### æ–¹æ³•1: pipã§ç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/IvyGain/LarkMasterMCP.git
cd LarkMasterMCP

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -e .
```

### æ–¹æ³•2: ä»®æƒ³ç’°å¢ƒã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/IvyGain/LarkMasterMCP.git
cd LarkMasterMCP

# ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆ
python -m venv venv

# ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆ
# macOS/Linux:
source venv/bin/activate
# Windows:
.\venv\Scripts\activate

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -e .
```

### ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
cp .env.example .env

# ç·¨é›†
nano .env  # ã¾ãŸã¯ä»»æ„ã®ã‚¨ãƒ‡ã‚£ã‚¿ã§ç·¨é›†
```

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹:
```
LARK_APP_ID=cli_xxxxxxxxxx
LARK_APP_SECRET=xxxxxxxxxxxxxxxxxx
```

---

## AIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®š

### Claude Desktop

**macOS:** `~/Library/Application Support/Claude/claude_desktop_config.json`
**Windows:** `%APPDATA%\Claude\claude_desktop_config.json`

```json
{
  "mcpServers": {
    "lark-master": {
      "command": "lark-mcp",
      "env": {
        "LARK_APP_ID": "cli_xxxxxxxxxx",
        "LARK_APP_SECRET": "xxxxxxxxxxxxxxxxxx"
      }
    }
  }
}
```

### Cursor

`.cursor/mcp.json` ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ä½œæˆ:

```json
{
  "mcpServers": {
    "lark-master": {
      "command": "lark-mcp",
      "env": {
        "LARK_APP_ID": "cli_xxxxxxxxxx",
        "LARK_APP_SECRET": "xxxxxxxxxxxxxxxxxx"
      }
    }
  }
}
```

### VS Code + Claude Code Extension

`.vscode/settings.json`:

```json
{
  "claude-code.mcpServers": {
    "lark-master": {
      "command": "lark-mcp",
      "env": {
        "LARK_APP_ID": "cli_xxxxxxxxxx",
        "LARK_APP_SECRET": "xxxxxxxxxxxxxxxxxx"
      }
    }
  }
}
```

### çµ¶å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ

`lark-mcp` ãŒPATHã«ãªã„å ´åˆ:

```json
{
  "mcpServers": {
    "lark-master": {
      "command": "/Users/yourname/LarkMasterMCP/venv/bin/lark-mcp",
      "env": {
        "LARK_APP_ID": "cli_xxxxxxxxxx",
        "LARK_APP_SECRET": "xxxxxxxxxxxxxxxxxx"
      }
    }
  }
}
```

ã¾ãŸã¯ PythonçµŒç”±:

```json
{
  "mcpServers": {
    "lark-master": {
      "command": "python",
      "args": ["-m", "lark_master_mcp.cli"],
      "cwd": "/Users/yourname/LarkMasterMCP",
      "env": {
        "LARK_APP_ID": "cli_xxxxxxxxxx",
        "LARK_APP_SECRET": "xxxxxxxxxxxxxxxxxx"
      }
    }
  }
}
```

---

## å‹•ä½œç¢ºèª

### 1. ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ãƒ†ã‚¹ãƒˆ

```bash
# MCPã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
lark-mcp

# æ­£å¸¸ã«èµ·å‹•ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ­ã‚°ãŒè¡¨ç¤º:
# INFO:lark_master_mcp.server:Initializing LarkMasterMCP server with 108 tools
```

### 2. AIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ãƒ†ã‚¹ãƒˆ

Claude Desktopãªã©ã§ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è©¦ã™:

```
Larkã§é¡§å®¢ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¦
```

æœŸå¾…ã•ã‚Œã‚‹çµæœ:
- BitableãŒè‡ªå‹•ã§ä½œæˆã•ã‚Œã‚‹
- ä¼šç¤¾åã€æ‹…å½“è€…åã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ç­‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè‡ªå‹•è¨­å®šã•ã‚Œã‚‹

### 3. åˆ©ç”¨å¯èƒ½ãªãƒ„ãƒ¼ãƒ«ã‚’ç¢ºèª

```
Larkã§ä½¿ãˆã‚‹ãƒ„ãƒ¼ãƒ«ã‚’æ•™ãˆã¦
```

ã¾ãŸã¯ `get_lark_bot_help` ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œ

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼

#### 1. "Failed to get access token"

**åŸå› :** App IDã¾ãŸã¯App SecretãŒé–“é•ã£ã¦ã„ã‚‹

**è§£æ±ºç­–:**
- `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®èªè¨¼æƒ…å ±ã‚’ç¢ºèª
- Lark Open Platformã§èªè¨¼æƒ…å ±ã‚’å†ç¢ºèª

#### 2. "Permission denied" ã‚¨ãƒ©ãƒ¼

**åŸå› :** å¿…è¦ãªæ¨©é™ãŒã‚¢ãƒ—ãƒªã«ä»˜ä¸ã•ã‚Œã¦ã„ãªã„

**è§£æ±ºç­–:**
- Lark Open Platformã§æ¨©é™ã‚’è¿½åŠ 
- ã‚¢ãƒ—ãƒªã‚’å†å…¬é–‹

#### 3. "lark-mcp: command not found"

**åŸå› :** PATHãŒé€šã£ã¦ã„ãªã„

**è§£æ±ºç­–:**
```bash
# pipã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å ´æ‰€ã‚’ç¢ºèª
pip show lark-master-mcp

# çµ¶å¯¾ãƒ‘ã‚¹ã§å®Ÿè¡Œ
/path/to/venv/bin/lark-mcp

# ã¾ãŸã¯PythonçµŒç”±
python -m lark_master_mcp.cli
```

#### 4. BitableãŒä½œæˆã•ã‚Œãªã„

**åŸå› :** `bitable:app` æ¨©é™ãŒãªã„

**è§£æ±ºç­–:**
- Lark Open Platformã§ `bitable:app` æ¨©é™ã‚’è¿½åŠ 
- ã‚¢ãƒ—ãƒªã‚’å†å…¬é–‹

### ãƒ­ã‚°ã®ç¢ºèª

è©³ç´°ãªãƒ­ã‚°ã‚’æœ‰åŠ¹ã«ã™ã‚‹:

```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

### ã‚µãƒãƒ¼ãƒˆ

- [GitHub Issues](https://github.com/IvyGain/LarkMasterMCP/issues)
- [Lark Open Platform ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://open.larksuite.com/document)

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒå®Œäº†ã—ãŸã‚‰:

1. **Smart Tools ã‚’è©¦ã™**: `smart_build_bitable` ã§è‡ªç„¶è¨€èªã‹ã‚‰ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
2. **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç¢ºèª**: `list_bitable_templates` ã§åˆ©ç”¨å¯èƒ½ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¡¨ç¤º
3. **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†**: `process_lark_message` ã§ãƒãƒ£ãƒƒãƒˆbotæ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆ

è©³ã—ã„ä½¿ã„æ–¹ã¯ [README.md](../README.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
